<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Master Pro 2025</title>
    <style>
        :root {
            --bg: #f0f2f5; --card: #ffffff; --text: #2c3e50;
            --primary: #4a90e2; --secondary: #2ecc71; --gold: #f1c40f;
        }
        /* –°–∫–∏–Ω—ã */
        body.dark { --bg: #1a1a2e; --card: #16213e; --text: #e94560; --primary: #0f3460; }
        body.neon { --bg: #000; --card: #111; --text: #39ff14; --primary: #ff00ff; }

        body { font-family: 'Segoe UI', Tahoma, sans-serif; background: var(--bg); color: var(--text); margin: 0; transition: 0.5s; }
        .hidden { display: none !important; }
        
        /* –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é */
        #menu, #game-screen {
            display: flex; flex-direction: column; align-items: center;
            justify-content: center; min-height: 100vh; padding: 20px;
        }

        .container {
            background: var(--card); padding: 30px; border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1); width: 100%; max-width: 500px; text-align: center;
        }

        .topic-grid {
            display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 20px;
        }

        button {
            padding: 15px; border: none; border-radius: 12px; cursor: pointer;
            font-weight: bold; font-size: 16px; transition: 0.2s; background: var(--primary); color: white;
        }
        button:hover { opacity: 0.8; transform: translateY(-2px); }
        .btn-topic { background: #5765f2; }
        .btn-check { background: var(--secondary); width: 100%; margin-top: 10px; }
        .btn-hint { background: var(--gold); margin-top: 5px; }

        /* –ò–≥—Ä–æ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã */
        .stats { display: flex; justify-content: space-between; width: 100%; margin-bottom: 20px; font-size: 14px; }
        .word-box { font-size: 32px; letter-spacing: 5px; margin: 30px 0; text-transform: uppercase; font-weight: 900; }
        .grammar-box { font-size: 18px; margin: 30px 0; line-height: 1.5; font-style: italic; }
        input {
            width: 90%; padding: 15px; border: 2px solid #ddd; border-radius: 10px;
            font-size: 18px; text-align: center; outline: none;
        }
        
        .xp-bar { width: 100%; height: 8px; background: #eee; border-radius: 4px; margin-top: 5px; overflow: hidden; }
        #xp-fill { width: 0%; height: 100%; background: var(--secondary); transition: 0.5s; }

        .shop { margin-top: 25px; border-top: 1px solid #eee; padding-top: 15px; }
    </style>
</head>
<body>

<!-- –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ -->
<div id="menu">
    <div class="container">
        <h1>English Master 2025</h1>
        <p>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è:</p>
        <div class="topic-grid">
            <button class="btn-topic" onclick="startGame('Jobs')">üíº Jobs</button>
            <button class="btn-topic" onclick="startGame('Environment')">üåø Nature</button>
            <button class="btn-topic" onclick="startGame('Tourism')">‚úàÔ∏è Tourism</button>
            <button class="btn-topic" onclick="startGame('Weather')">‚òÅÔ∏è Weather</button>
            <button class="btn-topic" onclick="startGame('Grammar')">üìù Grammar</button>
            <button class="btn-topic" style="background: #e67e22;" onclick="startGame('Mixed')">üé≤ –°–º–µ—à–∞–Ω–Ω—ã–π</button>
        </div>
    </div>
</div>

<!-- –ò–ì–†–û–í–û–ô –≠–ö–†–ê–ù -->
<div id="game-screen" class="hidden">
    <div class="container">
        <div class="stats">
            <div>ü™ô <span id="coins">0</span></div>
            <div style="text-align: right;">
                –£—Ä. <span id="lvl">1</span>
                <div class="xp-bar"><div id="xp-fill"></div></div>
            </div>
        </div>

        <div id="quest-label" style="color: gray; font-size: 14px;">–†–∞–∑–≥–∞–¥–∞–π —Å–ª–æ–≤–æ:</div>
        <div id="display-area"></div>

        <input type="text" id="user-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –æ—Ç–≤–µ—Ç..." autocomplete="off">
        <button class="btn-check" onclick="check()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
        <button class="btn-hint" onclick="getHint()">–ü–æ–¥—Å–∫–∞–∑–∫–∞ (-15 ü™ô)</button>
        <button onclick="backToMenu()" style="background:none; color:gray; font-size:12px; margin-top:15px;">‚¨Ö –ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é</button>

        <div class="shop">
            <p style="font-size:12px;">–°–∫–∏–Ω—ã:</p>
            <button onclick="setSkin('default')" style="font-size:10px; background:#95a5a6;">–°–≤–µ—Ç–ª—ã–π</button>
            <button onclick="buySkin('dark', 100)" style="font-size:10px; background:#2c3e50;">–¢—ë–º–Ω—ã–π (100)</button>
            <button onclick="buySkin('neon', 300)" style="font-size:10px; background:#ff00ff;">–ù–µ–æ–Ω (300)</button>
        </div>
    </div>
</div>

<script>
    // –ë–ê–ó–ê –î–ê–ù–ù–´–• (–±–æ–ª–µ–µ 150 —Å–ª–æ–≤ –∏ –ø—Ä–∞–≤–∏–ª)
    const DATA = {
        "Jobs": ["architect", "engineer", "pharmacist", "programmer", "journalist", "electrician", "detective", "scientist", "accountant", "surgeon", "pilot", "waiter", "librarian", "mechanic", "plumber"],
        "Environment": ["sustainability", "pollution", "recycling", "deforestation", "greenhouse", "biodiversity", "atmosphere", "ecosystem", "renewable", "wildlife", "glacier", "radiation"],
        "Tourism": ["itinerary", "sightseeing", "destination", "souvenir", "passport", "accommodation", "landmark", "excursion", "backpacking", "reservation", "departure", "adventure"],
        "Weather": ["thunderstorm", "humidity", "forecast", "blizzard", "hurricane", "drought", "temperature", "overcast", "lightning", "rainbow", "shivering", "scorching"],
        "Grammar": [
            {q: "I ___ (be) a student", a: "am"},
            {q: "She ___ (go) to work every day", a: "goes"},
            {q: "They ___ (be) watching TV now", a: "are"},
            {q: "Look! The bird ___ (fly)", a: "is flying"},
            {q: "I have ___ apple", a: "an"},
            {q: "He is ___ (tall) than me", a: "taller"},
            {q: "This is the ___ (big) house", a: "biggest"},
            {q: "We ___ (not / like) milk", a: "don't like"},
            {q: "___ you like pizza?", a: "do"},
            {q: "Yesterday I ___ (see) a ghost", a: "saw"}
        ]
    };

    let state = {
        coins: 0, xp: 0, lvl: 1, 
        currentTopic: "", currentAns: "", 
        isGrammar: false, skins: ['default']
    };

    function startGame(topic) {
        state.currentTopic = topic;
        document.getElementById('menu').classList.add('hidden');
        document.getElementById('game-screen').classList.remove('hidden');
        nextQuestion();
    }

    function backToMenu() {
        document.getElementById('menu').classList.remove('hidden');
        document.getElementById('game-screen').classList.add('hidden');
    }

    function scramble(word) {
        let a = word.split(""), n = a.length;
        for(let i = n - 1; i > 0; i--) {
            let j = Math.floor(Math.random() * (i + 1));
            [a[i], a[j]] = [a[j], a[i]];
        }
        return a.join("") === word ? scramble(word) : a.join("");
    }

    function nextQuestion() {
        let topic = state.currentTopic;
        if (topic === 'Mixed') {
            const keys = Object.keys(DATA);
            topic = keys[Math.floor(Math.random() * keys.length)];
        }

        const area = document.getElementById('display-area');
        const label = document.getElementById('quest-label');
        document.getElementById('user-input').value = "";

        if (topic === 'Grammar') {
            state.isGrammar = true;
            const item = DATA.Grammar[Math.floor(Math.random() * DATA.Grammar.length)];
            state.currentAns = item.a;
            label.innerText = "–ì—Ä–∞–º–º–∞—Ç–∏–∫–∞ (–≤—Å—Ç–∞–≤—å —Å–ª–æ–≤–æ):";
            area.innerHTML = `<div class="grammar-box">${item.q}</div>`;
        } else {
            state.isGrammar = false;
            const words = DATA[topic];
            state.currentAns = words[Math.floor(Math.random() * words.length)];
            label.innerText = `–¢–µ–º–∞: ${topic}. –†–∞–∑–≥–∞–¥–∞–π –∞–Ω–∞–≥—Ä–∞–º–º—É:`;
            area.innerHTML = `<div class="word-box">${scramble(state.currentAns)}</div>`;
        }
    }

    function check() {
        const input = document.getElementById('user-input').value.toLowerCase().trim();
        if (input === state.currentAns.toLowerCase()) {
            state.coins += 20;
            state.xp += 25;
            if (state.xp >= 100) { state.lvl++; state.xp = 0; }
            updateUI();
            nextQuestion();
        } else {
            alert("–ù–µ–≤–µ—Ä–Ω–æ! –ü–æ–ø—Ä–æ–±—É–π –µ—â–µ —Ä–∞–∑.");
        }
    }

    function getHint() {
        if (state.coins >= 15) {
            state.coins -= 15;
            updateUI();
            alert("–ü–µ—Ä–≤–∞—è –±—É–∫–≤–∞: " + state.currentAns[0].toUpperCase());
        } else {
            alert("–ú–∞–ª–æ –º–æ–Ω–µ—Ç!");
        }
    }

    function updateUI() {
        document.getElementById('coins').innerText = state.coins;
        document.getElementById('lvl').innerText = state.lvl;
        document.getElementById('xp-fill').style.width = state.xp + "%";
    }

    function buySkin(name, price) {
        if (state.skins.includes(name)) { setSkin(name); return; }
        if (state.coins >= price) {
            state.coins -= price;
            state.skins.push(name);
            updateUI();
            setSkin(name);
        } else { alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç!"); }
    }

    function setSkin(name) {
        document.body.className = name === 'default' ? '' : name;
    }

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏—è Enter
    document.getElementById('user-input').addEventListener('keypress', e => {
        if (e.key === 'Enter') check();
    });
</script>
</body>
</html>
