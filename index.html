<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Universe 2025</title>
    <style>
        :root {
            --bg: #050a18; --card: rgba(16, 24, 48, 0.9);
            --accent: #00d2ff; --accent-2: #9d50bb;
            --text: #e0e6ed; --success: #00f2fe;
        }

        body {
            font-family: 'Segoe UI', sans-serif; background: var(--bg);
            color: var(--text); margin: 0; display: flex; justify-content: center; min-height: 100vh;
            background-image: radial-gradient(circle at 50% 50%, #101a32 0%, #050a18 100%);
        }

        .container {
            width: 100%; max-width: 500px; padding: 20px; text-align: center;
        }

        /* Glassmorphism */
        .glass {
            background: var(--card); backdrop-filter: blur(15px);
            border: 1px solid rgba(255,255,255,0.1); border-radius: 25px; padding: 25px;
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.8);
        }

        h1 { background: linear-gradient(to right, var(--accent), var(--accent-2)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-size: 2.5rem; margin-bottom: 10px; }

        .stats-bar { display: flex; justify-content: space-between; margin-bottom: 20px; font-weight: bold; color: var(--accent); }

        /* Modes */
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
        button {
            padding: 15px; border: none; border-radius: 15px; cursor: pointer;
            font-weight: bold; transition: 0.3s; background: rgba(255,255,255,0.05); color: white; border: 1px solid rgba(255,255,255,0.1);
        }
        button:hover { background: var(--accent); color: black; transform: translateY(-3px); box-shadow: 0 0 15px var(--accent); }

        .gift-btn { background: linear-gradient(45deg, #f093fb 0%, #f5576c 100%); grid-column: span 2; margin-top: 10px; }

        /* Game Areas */
        .word-display { font-size: 2.5rem; margin: 30px 0; letter-spacing: 5px; color: var(--success); text-shadow: 0 0 10px var(--success); }
        input {
            width: 100%; padding: 15px; border-radius: 12px; border: none; background: rgba(0,0,0,0.3);
            color: white; font-size: 1.2rem; text-align: center; outline: none; margin-bottom: 15px;
        }

        /* Matching Game Style */
        .match-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin: 20px 0; }
        .match-item { padding: 10px; border: 1px solid var(--accent); border-radius: 8px; cursor: pointer; font-size: 0.9rem; }
        .selected { background: var(--accent) !important; color: black; }

        .hidden { display: none !important; }
        #feedback { font-weight: bold; margin: 10px 0; height: 20px; }

        /* Animations */
        @keyframes openGift { 0% { transform: scale(1); } 50% { transform: scale(1.2) rotate(5deg); } 100% { transform: scale(1); } }
        .anim-gift { animation: openGift 0.5s infinite; }
    </style>
</head>
<body>

<div class="container">
    <!-- MENU -->
    <div id="menu" class="glass">
        <h1>UNIVERSE</h1>
        <div class="stats-bar">
            <span>ü™ô <span id="m-coins">0</span></span>
            <span>üèÜ <span id="m-lvl">1</span> LVL</span>
        </div>
        <p>–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º –æ–±—É—á–µ–Ω–∏—è:</p>
        <div class="grid">
            <button onclick="game.start('Jobs')">üíº Jobs</button>
            <button onclick="game.start('Nature')">üåø Nature</button>
            <button onclick="game.start('Tourism')">‚úàÔ∏è Tourism</button>
            <button onclick="game.start('Weather')">‚òÅÔ∏è Weather</button>
            <button onclick="game.start('Match')">üß© Matching (New)</button>
            <button onclick="game.start('Grammar')">üìù Grammar</button>
            <button class="gift-btn" onclick="game.openGift()">üéÅ –û—Ç–∫—Ä—ã—Ç—å –ü–æ–¥–∞—Ä–æ–∫ (50 ü™ô)</button>
        </div>
    </div>

    <!-- GAME SCREEN -->
    <div id="game" class="glass hidden">
        <div class="stats-bar">
            <span id="topic-title">Topic</span>
            <span>ü™ô <span id="g-coins">0</span></span>
        </div>

        <div id="game-content">
            <!-- –°—é–¥–∞ –≤—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –∫–æ–Ω—Ç–µ–Ω—Ç —Ä–µ–∂–∏–º–∞ -->
        </div>

        <div id="input-area">
            <input type="text" id="answer" placeholder="–í–∞—à –æ—Ç–≤–µ—Ç..." autocomplete="off">
            <button style="width: 100%; background: var(--success); color: black;" onclick="game.check()">–ü–†–û–í–ï–†–ò–¢–¨</button>
        </div>

        <div id="feedback"></div>
        <button style="margin-top: 20px; background: none; border: none; color: gray;" onclick="game.toMenu()">‚Üê –í –º–µ–Ω—é</button>
    </div>
</div>

<script>
    const DB = {
        "Jobs": ["accountant", "architect", "electrician", "engineer", "firefighter", "journalist", "librarian", "mechanic", "nurse", "pharmacist", "plumber", "programmer", "scientist", "surgeon", "translator", "veterinarian"],
        "Nature": ["atmosphere", "biodiversity", "conservation", "deforestation", "ecosystem", "emissions", "extinction", "glacier", "greenhouse", "habitat", "pollution", "recycling", "renewable", "sustainability"],
        "Tourism": ["accommodation", "adventure", "booking", "destination", "excursion", "guidebook", "itinerary", "landmark", "passport", "reservation", "sightseeing", "souvenir", "voyage"],
        "Weather": ["avalanche", "blizzard", "drought", "forecast", "humidity", "hurricane", "lightning", "overcast", "rainbow", "scorching", "thunderstorm", "tornado", "typhoon"],
        "Match": [
            {e: "Environment", r: "–û–∫—Ä—É–∂–∞—é—â–∞—è —Å—Ä–µ–¥–∞"}, {e: "Government", r: "–ü—Ä–∞–≤–∏—Ç–µ–ª—å—Å—Ç–≤–æ"},
            {e: "Experience", r: "–û–ø—ã—Ç"}, {e: "Improvement", r: "–£–ª—É—á—à–µ–Ω–∏–µ"},
            {e: "Knowledge", r: "–ó–Ω–∞–Ω–∏—è"}, {e: "Responsibility", r: "–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å"}
        ],
        "Grammar": [
            {q: "I ___ (study) English now.", a: "am studying"},
            {q: "She ___ (have) a car last year.", a: "had"},
            {q: "If it ___ (rain), we will stay.", a: "rains"},
            {q: "He is the ___ (good) player.", a: "best"},
            {q: "They ___ (finish) just now.", a: "have finished"}
        ]
    };

    class EnglishUniverse {
        constructor() {
            this.coins = parseInt(localStorage.getItem('uni_coins')) || 0;
            this.lvl = parseInt(localStorage.getItem('uni_lvl')) || 1;
            this.currentTopic = "";
            this.ans = "";
            this.selectedMatch = null;
            this.updateStats();
        }

        start(topic) {
            this.currentTopic = topic;
            document.getElementById('menu').classList.add('hidden');
            document.getElementById('game').classList.remove('hidden');
            document.getElementById('topic-title').innerText = topic;
            this.next();
        }

        toMenu() {
            document.getElementById('menu').classList.remove('hidden');
            document.getElementById('game').classList.add('hidden');
        }

        next() {
            const content = document.getElementById('game-content');
            const inputArea = document.getElementById('input-area');
            inputArea.classList.remove('hidden');
            document.getElementById('answer').value = "";

            if (this.currentTopic === "Match") {
                inputArea.classList.add('hidden');
                this.renderMatch();
            } else if (this.currentTopic === "Grammar") {
                let item = DB.Grammar[Math.floor(Math.random() * DB.Grammar.length)];
                this.ans = item.a;
                content.innerHTML = `<div style="font-size:1.2rem; margin: 20px 0;">${item.q}</div>`;
            } else {
                let word = DB[this.currentTopic][Math.floor(Math.random() * DB[this.topic === "Match" ? "Jobs" : this.currentTopic].length)];
                this.ans = word;
                content.innerHTML = `<div class="word-display">${this.scramble(word)}</div>`;
            }
        }

        renderMatch() {
            const content = document.getElementById('game-content');
            let items = [...DB.Match].sort(() => 0.5 - Math.random()).slice(0, 3);
            let left = items.map(i => i.e).sort();
            let right = items.map(i => i.r).sort();
            
            let html = '<div class="match-grid">';
            left.forEach(word => html += `<div class="match-item" onclick="game.matchClick(this, 'e')">${word}</div>`);
            right.forEach(word => html += `<div class="match-item" onclick="game.matchClick(this, 'r')">${word}</div>`);
            html += '</div>';
            content.innerHTML = html + `<p style="font-size:0.8rem">–°–æ–µ–¥–∏–Ω–∏ —Å–ª–æ–≤–æ –∏ –ø–µ—Ä–µ–≤–æ–¥!</p>`;
        }

        matchClick(el, type) {
            if (this.selectedMatch) {
                let pair = DB.Match.find(i => (i.e === this.selectedMatch.text && i.r === el.innerText) || (i.r === this.selectedMatch.text && i.e === el.innerText));
                if (pair) {
                    this.coins += 10;
                    this.showFeedback("‚úÖ –í–µ—Ä–Ω–æ!", true);
                    this.next();
                } else {
                    this.showFeedback("‚ùå –ü–æ–ø—Ä–æ–±—É–π —Å–Ω–æ–≤–∞", false);
                }
                this.selectedMatch = null;
                document.querySelectorAll('.match-item').forEach(i => i.classList.remove('selected'));
            } else {
                this.selectedMatch = { el: el, text: el.innerText };
                el.classList.add('selected');
            }
        }

        scramble(w) {
            let a = w.split("").sort(() => Math.random() - 0.5);
            return a.join("") === w ? this.scramble(w) : a.join("");
        }

        check() {
            let val = document.getElementById('answer').value.toLowerCase().trim();
            if (val === this.ans.toLowerCase()) {
                this.coins += 20;
                this.showFeedback("‚úÖ –û—Ç–ª–∏—á–Ω–æ! +20 ü™ô", true);
                this.save();
                setTimeout(() => this.next(), 1000);
            } else {
                this.showFeedback("‚ùå –û—à–∏–±–∫–∞!", false);
            }
        }

        openGift() {
            if (this.coins >= 50) {
                this.coins -= 50;
                let bonus = [10, 100, 200, "XP", "Super Tip"][Math.floor(Math.random() * 5)];
                alert(`üéÅ –í—ã –ø–æ–ª—É—á–∏–ª–∏: ${bonus}!`);
                if (typeof bonus === 'number') this.coins += bonus;
                this.save();
            } else {
                alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç!");
            }
        }

        showFeedback(txt, isWin) {
            let f = document.getElementById('feedback');
            f.innerText = txt;
            f.style.color = isWin ? "var(--success)" : "red";
        }

        save() {
            localStorage.setItem('uni_coins', this.coins);
            localStorage.setItem('uni_lvl', this.lvl);
            this.updateStats();
        }

        updateStats() {
            document.getElementById('m-coins').innerText = this.coins;
            document.getElementById('g-coins').innerText = this.coins;
            document.getElementById('m-lvl').innerText = this.lvl;
        }
    }

    const game = new EnglishUniverse();
    document.getElementById('answer').addEventListener('keypress', e => { if(e.key === 'Enter') game.check(); });
</script>

</body>
</html>
