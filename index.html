<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>English Master Game 2025</title>
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º PyScript –¥–ª—è —Ä–∞–±–æ—Ç—ã Python –≤ –±—Ä–∞—É–∑–µ—Ä–µ -->
    <link rel="stylesheet" href="pyscript.net" />
    <script type="module" src="pyscript.net"></script>
    <style>
        body { font-family: 'Arial', sans-serif; background: #f0f2f5; display: flex; justify-content: center; padding: 20px; }
        #game-container { background: white; padding: 30px; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); width: 100%; max-width: 600px; text-align: center; }
        .stats { display: flex; justify-content: space-between; margin-bottom: 20px; font-weight: bold; color: #2c3e50; }
        .word-box { font-size: 32px; letter-spacing: 5px; margin: 20px 0; color: #3498db; text-transform: uppercase; }
        input { padding: 10px; font-size: 18px; border: 2px solid #ddd; border-radius: 5px; width: 70%; }
        button { padding: 10px 20px; font-size: 16px; cursor: pointer; background: #2ecc71; color: white; border: none; border-radius: 5px; margin: 5px; }
        button:hover { background: #27ae60; }
        .hint-btn { background: #f1c40f; }
        .shop { margin-top: 20px; padding-top: 20px; border-top: 2px solid #eee; }
        .skin-active { border: 3px solid #e74c3c !important; }
    </style>
</head>
<body>

<div id="game-container">
    <h1>Learn English 2025</h1>
    
    <div class="stats">
        <div>–ú–æ–Ω–µ—Ç—ã: <span id="coins">0</span> ü™ô</div>
        <div>–¢–µ–º–∞: <span id="current-topic">Jobs</span></div>
    </div>

    <div id="quest-text">–†–∞–∑–≥–∞–¥–∞–π —Å–ª–æ–≤–æ (–∞–Ω–∞–≥—Ä–∞–º–º–∞):</div>
    <div id="display-word" class="word-box">LOADING...</div>

    <input type="text" id="user-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –æ—Ç–≤–µ—Ç...">
    <br>
    <button onclick="check_answer()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
    <button class="hint-btn" onclick="get_hint()">–ü–æ–¥—Å–∫–∞–∑–∫–∞ (10 ü™ô)</button>
    
    <div id="message" style="margin-top: 15px; font-weight: bold;"></div>

    <div class="shop">
        <h3>–ú–∞–≥–∞–∑–∏–Ω —Å–∫–∏–Ω–æ–≤</h3>
        <button onclick="buy_skin('Classic', 0)">Classic (Free)</button>
        <button onclick="buy_skin('Neon', 50)">Neon (50 ü™ô)</button>
        <button onclick="buy_skin('Dark', 100)">Dark Mode (100 ü™ô)</button>
    </div>
</div>

<script type="py">
import random
from pyscript import document

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–ª–æ–≤ –∏ –∑–∞–¥–∞–Ω–∏–π
DATA = {
    "Jobs": ["engineer", "developer", "architect", "nurse", "scientist", "accountant", "lawyer"],
    "Environment": ["pollution", "recycling", "sustainability", "wildlife", "atmosphere", "glacier"],
    "Tourism": ["itinerary", "sightseeing", "destination", "souvenir", "passport", "adventure"],
    "Weather": ["thunderstorm", "humidity", "forecast", "blizzard", "hurricane", "drought"],
    "Grammar": [
        {"q": "I ___ (to be) a student", "a": "am"},
        {"q": "She ___ (to go) to work every day", "a": "goes"},
        {"q": "They ___ (to watch) a movie now", "a": "are watching"},
        {"q": "___ apple a day keeps the doctor away", "a": "an"}
    ]
}

class Game:
    def __init__(self):
        self.coins = 0
        self.current_word = ""
        self.current_topic = ""
        self.correct_answer = ""
        self.mode = "anagram" # anagram or grammar
        self.next_round()

    def next_round(self):
        # –°–ª—É—á–∞–π–Ω—ã–π –≤—ã–±–æ—Ä —Ç–µ–º—ã
        self.current_topic = random.choice(list(DATA.keys()))
        document.getElementById("current-topic").innerText = self.current_topic
        
        if self.current_topic == "Grammar":
            item = random.choice(DATA["Grammar"])
            self.correct_answer = item["a"]
            display_text = item["q"]
            document.getElementById("quest-text").innerText = "–ó–∞–ø–æ–ª–Ω–∏ –ø—Ä–æ–ø—É—Å–∫:"
        else:
            self.correct_answer = random.choice(DATA[self.current_topic])
            # –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏–µ –±—É–∫–≤
            scrambled = list(self.correct_answer)
            random.shuffle(scrambled)
            display_text = "".join(scrambled)
            document.getElementById("quest-text").innerText = "–†–∞–∑–≥–∞–¥–∞–π —Å–ª–æ–≤–æ:"

        document.getElementById("display-word").innerText = display_text
        document.getElementById("user-input").value = ""

    def check(self, user_val):
        if user_val.lower().strip() == self.correct_answer.lower():
            self.coins += 15
            self.update_ui("–ü—Ä–∞–≤–∏–ª—å–Ω–æ! +15 –º–æ–Ω–µ—Ç")
            self.next_round()
        else:
            self.update_ui("–û—à–∏–±–∫–∞, –ø–æ–ø—Ä–æ–±—É–π –µ—â–µ —Ä–∞–∑!", "#e74c3c")

    def update_ui(self, msg, color="#2ecc71"):
        document.getElementById("coins").innerText = str(self.coins)
        msg_el = document.getElementById("message")
        msg_el.innerText = msg
        msg_el.style.color = color

game = Game()

def check_answer(event=None):
    val = document.getElementById("user-input").value
    game.check(val)

def get_hint(event=None):
    if game.coins >= 10:
        game.coins -= 10
        hint = f"–ü–µ—Ä–≤–∞—è –±—É–∫–≤–∞: {game.correct_answer[0]}"
        game.update_ui(hint, "#f39c12")
    else:
        game.update_ui("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç!", "#e74c3c")

def buy_skin(name, price):
    if game.coins >= price:
        if name == "Neon":
            document.getElementById("game-container").style.background = "#00ffcc"
        elif name == "Dark":
            document.getElementById("game-container").style.background = "#2c3e50"
            document.getElementById("game-container").style.color = "white"
        else:
            document.getElementById("game-container").style.background = "white"
            document.getElementById("game-container").style.color = "black"
        
        if price > 0: game.coins -= price
        game.update_ui(f"–°–∫–∏–Ω {name} –ø—Ä–∏–º–µ–Ω–µ–Ω!")
    else:
        game.update_ui("–ù—É–∂–Ω–æ –±–æ–ª—å—à–µ –∑–æ–ª–æ—Ç–∞!", "#e74c3c")

# –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –≤ –≥–ª–æ–±–∞–ª—å–Ω—É—é –æ–±–ª–∞—Å—Ç—å JS
window.check_answer = check_answer
window.get_hint = get_hint
window.buy_skin = buy_skin
</script>

</body>
</html>
